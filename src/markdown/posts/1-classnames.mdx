---
slug: 1-classnames
title: G√©rer les classNames facilement avec la biblioth√®que classnames
coverImage: /posts/1/cover.jpeg
calendarDay: 1
category: Frontend
---

On commence le mois avec un utilitaire tout b√™te mais (quasi) indispensable pour tout projet React, m√™me le plus petit et le plus √©ph√©m√®re... comme un calendrier de l'avent !

## La naissance d'un code spaguetti

Le JSX nous permet de d√©crire le rendu des composants React dans un format tr√®s proche du HTML, et, de la m√™me fa√ßon qu'en HTML, il est possible d'affecter une classe √† un √©l√©ment afin d'en g√©rer le styling √† l'aide de l'attribut `className`.

```
  const BlueButton = () => {
    render <button
      className="blue"
      onClick={alert("I'm blue daboudi dabouda")}>
        Click me
    </button>
  }
```

Comme on est dans un environnement JavaScript, on peut donc manipuler la classe pour qu'elle devienne dynamique. Or, on peut vite perdre en lisibilit√© si les conditions deviennent complexes.

```
  const BlueButton = ({isBig, isCentered, className}) => {
    render <button
      className={
        `blue ${isBig ? 'big', ''}` ${isCentered ? 'center', ''} ${className || ''}`
      }
      onClick={alert("I'm blue daboudi dabouda")}>
      Click me
    </button>
  }
```

On retrouvera par exemple ce genre de customisation lors de la cr√©ation des composants de bases du design-system d'une application, puisque ceux-ci doivent √™tre r√©utilisables au maximum mais s'appliquer √† de nombreux cas d'usages et acc√©pter plusieurs variantes (ex: bouton de couleurs primaire, secondaire ou terriaire, select simple, multiple ou avec auto-compl√©tion, image de plusieurs taille en fonction du device...)

On se retrouvera donc avec des template-string pleines d'op√©rations ternaires ou fallback et cette logique sera r√©p√©t√©e pour de tr√®s nombreux composants. Clairement, on a pas besoin de se rajouter des boulets suppl√©mentaires aux pieds et de g√©rer ce genre de chose √† la main.

## Se lib√©rer de la gestion des classNames

La petite librairie [classnames](https://github.com/JedWatson/classnames) permet de palier √† ce probl√®me en joignant conditionellement les classNames pour cr√©er une chaine propre.

classNames prend un nombre illimit√©s d'arguments pouvant √™tre au format :

1. **string**

```
classNames('foo', 'bar'); // => 'foo bar'
```

2. **tableau**

```
classNames(['foo', 'bar']); // => 'foo bar'
```

3. **objet**

```
classNames({ 'foo-bar': true }); // => 'foo-bar'
classNames({ 'foo-bar': false }); // => ''
classNames('foo', { bar: true }); // => 'foo bar'
classNames({ 'foo-bar': true }); // => 'foo-bar'
classNames({ 'foo-bar': false }); // => ''
classNames({ foo: true }, { bar: true }); // => 'foo bar'
classNames({ foo: true, bar: true }); // => 'foo bar'
```

Toute "falsy values" sera ignor√©e

```
classNames(null, false, 'bar', undefined, 0, 1, { baz: null }, ''); // => 'bar 1'
```

## La cerise sur le gateau üçí

Si vous utilisez un outil qui g√©n√®re des noms de classes dynamiques afin d'√©viter tout side-effect dans votre CSS (comme CSS Modules), il est possible de d√©cupler le potentiel de `classnames` en utilisant les propri√©t√© dynamiques d'objet introduites depuis ES6.

```
import styles from 'styles.module.css'
// [...]

classNames(
  styles.blue,
  {
    [styles.isBlue]: true,
    [styles.isCentered]: false,
  }
); // => 'blue isBlue'
```

## Pour conclure

Cet utilitaire fait le taf, et seulement √ßa. En plus sa taille ridicule de [442B minifi√©+gzip√©](https://bundlephobia.com/result?p=classnames@2.2.6) ne plombera pas les perfs de votre site ou appli.
C'est pourquoi on le retrouve dans de nombreux projets React et s'il n'y est pas, ne pas h√©siter √† le rajouter !
